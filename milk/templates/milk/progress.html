{% extends 'milk/base.html' %}

{% block content %}

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.4/Chart.min.js"></script>



{% if progress.num == 100 %}
  <div>
    処理終了
  </div>
  <div>
    <canvas id="accuracy"></canvas>
    <script>
      var ctx = document.getElementById('accuracy').getContext('2d');
      var accuracy = new Chart(ctx, {
        type: 'line',
        data: {
          labels: {{ epochs }},
          datasets: [{
            label: 'acc',
            data: {{ acc_list }},
            backgroundColor: "rgba(153,255,51,0.4)",
            borderColor: "rgba(153,255,51,0.4)",
            lineTension: 0
          }, {
            label: 'val_acc',
            data: {{ val_acc_list }},
            backgroundColor: "rgba(255,153,0,0.4)",
            borderColor: "rgba(255,153,0,0.4)",
            lineTension: 0
          }]
        }
      });
    </script>
  </div>


{% else %}
<meta http-equiv="refresh" content="3">

  {% if progress.num > 0 %}
  {% load static %}
  <img src="{% static "milk/confusion_visualize.png" %}">
  <img src="{% static "milk/confusion_matrix.png" %}">
    <div>train_size: {{ progress.nb_train }}</div>

    <div class="progress">
      <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="{{ progress.num }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ progress.num }}%"></div>
    </div>

    <canvas id="accuracy"></canvas>
    <script>
      var ctx = document.getElementById('accuracy').getContext('2d');
      var accuracy = new Chart(ctx, {
        type: 'line',
        data: {
          labels: {{ epochs }},
          datasets: [{
            label: 'acc',
            data: {{ acc_list }},
            backgroundColor: "rgba(153,255,51,0.4)",
            borderColor: "rgba(153,255,51,0.4)",
            lineTension: 0
          }, {
            label: 'val_acc',
            data: {{ val_acc_list }},
            backgroundColor: "rgba(255,153,0,0.4)",
            borderColor: "rgba(255,153,0,0.4)",
            lineTension: 0
          }]
        }
      });
    </script>

  <div>{{ fpr }}</div>
  <div>{{ tpr }}</div>
  <div>{{ auc }}</div>

  {% else %}
    <div>データロード中...</div>
    {% load static %}
    <img src="{% static "milk/model.png" %}">

  {% endif %}

{% endif %}

{% endblock %}
